.upload-data-page { padding-bottom: var(--space-12); }

/* ===== hero banner ===== */
.upload-hero {
  background: linear-gradient(135deg, #006d77 0%, #83c5be 100%);
  padding: 3rem 2rem; text-align: center; color: white; margin-bottom: 2.5rem;
}
.upload-hero .heading1 { text-shadow: 2px 2px 4px rgba(0,0,0,0.3); margin-bottom: 0.5rem; }
.upload-hero .bodytext { font-size: 1.15rem; color: rgba(255,255,255,0.92); max-width: 700px; margin: 0 auto; }

/* ===== timestamp picker ===== */
.upload-timestamp-row {
  display: flex; flex-wrap: wrap; align-items: center; gap: 0.75rem;
  margin-bottom: var(--space-4); padding: 1rem 1.25rem;
  background: linear-gradient(135deg, rgba(131,197,190,0.06), rgba(0,109,119,0.06));
  border: 2px solid #83c5be; border-radius: 12px;
}
.upload-timestamp-label { font-weight: 600; color: #006d77; font-size: 0.95rem; }
.upload-timestamp-hint { font-weight: 400; color: var(--color-text-dim, #757575); font-size: 0.8rem; margin-left: 0.25rem; }
.upload-timestamp-input {
  padding: 0.5rem 0.75rem; border: 2px solid #83c5be; border-radius: 8px;
  font-size: 0.9rem; outline: none; transition: border-color 0.2s;
}
.upload-timestamp-input:focus { border-color: #006d77; box-shadow: 0 0 0 3px rgba(131,197,190,0.2); }

/* ===== drop zone ===== */
.csv-drop-zone {
  width: 100%; padding: var(--space-8) var(--space-6); border-radius: 12px;
  border: 2px dashed #83c5be; text-align: center; cursor: pointer;
  background: linear-gradient(135deg, rgba(131,197,190,0.06), rgba(0,109,119,0.06));
  transition: background 0.2s, border-color 0.2s, transform 0.15s;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  min-height: 180px; gap: 0.5rem;
}
.csv-drop-zone:hover, .csv-drop-zone.highlight {
  border-color: #006d77; transform: translateY(-2px);
  background: linear-gradient(135deg, rgba(131,197,190,0.12), rgba(0,109,119,0.12));
}
.csv-drop-zone-icon { font-size: 2.5rem; line-height: 1; opacity: 0.7; }
.csv-drop-zone-main { font-size: 1rem; font-weight: 600; color: #006d77; }
.csv-drop-zone-sub { font-size: 0.85rem; color: var(--color-text-dim, #757575); }
.csv-drop-zone-file { margin-top: 0.25rem; font-size: 0.95rem; font-weight: 600; color: #006d77; word-break: break-all; }

/* ===== status banners ===== */
.upload-status-banner {
  display: flex; align-items: center; gap: 0.75rem; padding: 0.85rem 1.25rem;
  border-radius: 10px; font-size: 0.95rem; font-weight: 500; margin-top: var(--space-4); flex-wrap: wrap;
}
.upload-status-banner.success { background: rgba(46,204,113,0.1); border: 2px solid rgba(46,204,113,0.4); color: #1b7a41; }
.upload-status-banner.error { background: rgba(231,76,60,0.1); border: 2px solid rgba(231,76,60,0.35); color: #c0392b; }
.upload-status-banner.warning { background: rgba(241,196,15,0.1); border: 2px solid rgba(241,196,15,0.4); color: #7d6608; }
.upload-status-banner.info { background: rgba(0,109,119,0.08); border: 2px solid rgba(0,109,119,0.25); color: #006d77; }

/* ===== summary cards ===== */
.upload-summary-grid { display: grid; grid-template-columns: repeat(4,1fr); gap: var(--space-4); margin: var(--space-6) 0; }
.upload-summary-card {
  background: linear-gradient(135deg, rgba(131,197,190,0.08), rgba(0,109,119,0.08));
  border: 2px solid #83c5be; border-radius: 12px; padding: 1.25rem; text-align: center;
  transition: transform 0.2s, box-shadow 0.2s;
}
.upload-summary-card:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,109,119,0.15); }
.upload-summary-number { font-size: 2rem; font-weight: 700; color: #006d77; line-height: 1.2; }
.upload-summary-label { font-size: 0.85rem; color: var(--color-text-dim, #757575); margin-top: 0.25rem; }
@media (max-width: 768px) { .upload-summary-grid { grid-template-columns: repeat(2,1fr); } }
@media (max-width: 480px) { .upload-summary-grid { grid-template-columns: 1fr; } }

/* ===== table controls ===== */
.upload-table-controls {
  display: flex; align-items: center; justify-content: space-between;
  flex-wrap: wrap; gap: 0.75rem; margin-top: var(--space-8); margin-bottom: var(--space-3);
}
.upload-select-btns { display: flex; gap: 0.5rem; }
.upload-btn-sm {
  padding: 0.4rem 0.85rem; border-radius: 8px; border: 2px solid #83c5be;
  background: white; color: #006d77; font-weight: 600; font-size: 0.8rem;
  cursor: pointer; transition: all 0.15s;
}
.upload-btn-sm:hover { background: rgba(131,197,190,0.12); border-color: #006d77; }

/* ===== data table ===== */
.upload-table-wrap { overflow-x: auto; border: 2px solid #83c5be; border-radius: 12px; margin-top: var(--space-3); }
.upload-table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
.upload-table thead {
  background: linear-gradient(135deg, #006d77, #0891b2); color: white;
  position: sticky; top: 0; z-index: 1;
}
.upload-table th { padding: 0.75rem; text-align: left; font-weight: 600; white-space: nowrap; }
.upload-table tbody tr { border-bottom: 1px solid rgba(131,197,190,0.25); transition: background 0.15s; }
.upload-table tbody tr:hover { background: rgba(131,197,190,0.08); }
.upload-table tbody tr.duplicate-row { background: rgba(241,196,15,0.08); }
.upload-table tbody tr.no-gps-row { opacity: 0.55; }
.upload-table td { padding: 0.6rem 0.75rem; white-space: nowrap; }
.upload-table td input[type="checkbox"] { width: 16px; height: 16px; accent-color: #006d77; cursor: pointer; }
.upload-table-scroll { max-height: 420px; overflow-y: auto; }

/* [ADDED] Clickable rows */
.upload-row-clickable { cursor: pointer; }
.upload-row-clickable:hover { background: rgba(131,197,190,0.12) !important; }

/* [ADDED] Source file cell (truncated) */
.upload-source-cell { max-width: 120px; overflow: hidden; text-overflow: ellipsis; font-size: 0.75rem; color: #006d77; }

/* [ADDED] Expandable detail row */
.upload-detail-row { background: rgba(0,109,119,0.03) !important; }
.upload-detail-row td { padding: 0 !important; }
.upload-detail-grid {
  display: flex; flex-wrap: wrap; gap: 1.5rem; padding: 0.85rem 1.25rem;
  border-top: 2px dashed rgba(131,197,190,0.3);
}
.upload-detail-item { display: flex; flex-direction: column; gap: 0.15rem; }
.upload-detail-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.06em; color: var(--color-text-dim, #757575); font-weight: 600; }
.upload-detail-value { font-size: 0.95rem; font-weight: 600; color: #1a1a1a; }

/* badges */
.dup-badge {
  display: inline-block; background: rgba(241,196,15,0.18); color: #7d6608;
  font-size: 0.7rem; font-weight: 700; text-transform: uppercase; padding: 0.15rem 0.5rem; border-radius: 999px;
}
.fix-badge { display: inline-block; padding: 0.1rem 0.45rem; border-radius: 999px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; }
.fix-ok { background: rgba(46,204,113,0.15); color: #1b7a41; }
.fix-none { background: rgba(231,76,60,0.1); color: #c0392b; }

/* ===== action buttons ===== */
.upload-actions { display: flex; gap: var(--space-3); justify-content: flex-end; margin-top: var(--space-6); flex-wrap: wrap; }
.upload-btn-submit {
  padding: 0.75rem 2rem; border-radius: 25px; border: none;
  background: linear-gradient(135deg, #006d77, #0891b2); color: white;
  font-weight: 600; font-size: 1rem; cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 12px rgba(0,109,119,0.25);
}
.upload-btn-submit:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(0,109,119,0.35); }
.upload-btn-submit:disabled { opacity: 0.5; cursor: not-allowed; }
.upload-btn-clear {
  padding: 0.75rem 2rem; border-radius: 25px; border: 2px solid #83c5be;
  background: white; color: #006d77; font-weight: 600; font-size: 1rem;
  cursor: pointer; transition: all 0.2s;
}
.upload-btn-clear:hover { background: rgba(131,197,190,0.1); border-color: #006d77; }
.upload-btn-delete {
  padding: 0.3rem 0.7rem; border-radius: 8px; border: 2px solid #e74c3c;
  background: white; color: #e74c3c; font-weight: 600; font-size: 0.75rem;
  cursor: pointer; transition: all 0.15s;
}
.upload-btn-delete:hover:not(:disabled) { background: #e74c3c; color: white; }
.upload-btn-delete:disabled { opacity: 0.5; cursor: not-allowed; }

/* ===== [ADDED] Battery summary cards ===== */
.battery-summary-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: var(--space-4); margin-bottom: var(--space-4);
}
.battery-card {
  background: white; border: 2px solid #83c5be; border-radius: 12px;
  padding: 1.25rem; transition: transform 0.2s, box-shadow 0.2s;
}
.battery-card:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,109,119,0.15); }
.battery-card-name { font-weight: 700; color: #006d77; font-size: 0.95rem; margin-bottom: 0.75rem; word-break: break-all; }
.battery-gauge-wrap { display: flex; align-items: center; gap: 0.75rem; }
.battery-gauge-track {
  flex: 1; height: 14px; background: #e8e8e8; border-radius: 999px; overflow: hidden;
  border: 1px solid rgba(131,197,190,0.3);
}
.battery-gauge-fill { height: 100%; border-radius: 999px; transition: width 0.4s ease; }
.battery-gauge-label { font-weight: 800; font-size: 1.2rem; min-width: 48px; text-align: right; }
.battery-card-detail { margin-top: 0.5rem; font-size: 0.8rem; color: var(--color-text-dim, #757575); }

/* ===== section titles ===== */
.upload-section-title {
  font-size: 1.35rem; font-weight: 700; color: #006d77;
  margin: var(--space-8) 0 var(--space-3);
  padding-bottom: 0.4rem; border-bottom: 3px solid #83c5be; display: inline-block;
}

/* ===== date range ===== */
.upload-date-range { display: flex; align-items: center; flex-wrap: wrap; gap: 1rem; margin-bottom: var(--space-4); }
.upload-date-label { display: flex; align-items: center; gap: 0.4rem; font-weight: 600; color: #006d77; font-size: 0.9rem; }
.upload-date-input {
  padding: 0.45rem 0.7rem; border: 2px solid #83c5be; border-radius: 8px;
  font-size: 0.85rem; outline: none; transition: border-color 0.2s;
}
.upload-date-input:focus { border-color: #006d77; box-shadow: 0 0 0 3px rgba(131,197,190,0.2); }
.upload-date-hint { font-size: 0.8rem; color: var(--color-text-dim, #757575); margin-left: auto; }

/* ===== map ===== */
.upload-map-wrap {
  width: 100%; height: 450px; border-radius: 12px; overflow: hidden;
  border: 2px solid #83c5be; box-shadow: 0 4px 12px rgba(0,109,119,0.15);
}
.upload-map-wrap .leaflet-map, .upload-map-wrap .leaflet-container { width: 100%; height: 100%; }
.upload-map-empty {
  width: 100%; height: 200px; border-radius: 12px; border: 2px dashed #83c5be;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  text-align: center; color: #006d77; font-weight: 500; padding: 2rem;
  background: linear-gradient(135deg, rgba(131,197,190,0.04), rgba(0,109,119,0.04));
}
.upload-map-empty-sub { font-size: 0.85rem; color: var(--color-text-dim, #757575); font-weight: 400; margin-top: 0.25rem; }
.upload-map-legend { display: flex; flex-wrap: wrap; gap: 1.25rem; align-items: center; margin-top: var(--space-3); font-size: 0.8rem; color: var(--color-text-dim, #757575); }
.upload-legend-item { display: inline-flex; align-items: center; gap: 0.35rem; }
.upload-legend-dot { width: 12px; height: 12px; border-radius: 999px; border: 2px solid #006d77; }
.upload-legend-line { width: 28px; height: 0; border-top: 3px solid #006d77; border-radius: 999px; opacity: 0.8; }

/* ===== dev note ===== */
.upload-dev-note {
  margin-top: var(--space-8); padding: 1rem 1.25rem;
  background: rgba(0,109,119,0.05); border-left: 4px solid #006d77;
  border-radius: 0 8px 8px 0; font-size: 0.85rem; color: #546e7a;
}

/* ===== turtle selector for map ===== */
.upload-turtle-selector {
  display: flex; flex-wrap: wrap; align-items: center; gap: 0.75rem;
  margin-bottom: var(--space-4); padding: 0.85rem 1.25rem;
  background: rgba(0,109,119,0.04); border: 2px solid rgba(131,197,190,0.3);
  border-radius: 12px;
}
.upload-turtle-selector-label { font-weight: 600; color: #006d77; font-size: 0.9rem; }
.upload-turtle-selector-btns { display: flex; gap: 0.35rem; }
.upload-turtle-chips { display: flex; flex-wrap: wrap; gap: 0.4rem; }
.upload-turtle-chip {
  display: inline-flex; align-items: center; gap: 0.35rem;
  padding: 0.35rem 0.75rem; border-radius: 999px;
  border: 2px solid #ccc; background: white;
  font-size: 0.8rem; font-weight: 600; color: #555;
  cursor: pointer; transition: all 0.15s; user-select: none;
}
.upload-turtle-chip:hover { border-color: #006d77; color: #006d77; }
.upload-turtle-chip.active { font-weight: 700; }
.upload-turtle-chip.partial { opacity: 0.7; }
.upload-turtle-chip-dot {
  width: 10px; height: 10px; border-radius: 999px;
  transition: background 0.15s;
}

/* ===== grouped upload history ===== */
.upload-history-grouped { display: flex; flex-direction: column; gap: 0.5rem; }
.upload-history-turtle {
  border: 2px solid #83c5be; border-radius: 12px; overflow: hidden;
  transition: box-shadow 0.2s;
}
.upload-history-turtle:hover { box-shadow: 0 4px 12px rgba(0,109,119,0.1); }
.upload-history-turtle-header {
  display: flex; align-items: center; gap: 0.75rem;
  padding: 0.85rem 1.25rem; cursor: pointer;
  background: linear-gradient(135deg, rgba(131,197,190,0.06), rgba(0,109,119,0.06));
  transition: background 0.15s;
}
.upload-history-turtle-header:hover { background: rgba(131,197,190,0.12); }
.upload-history-turtle-dot {
  width: 14px; height: 14px; border-radius: 999px;
  border: 2px solid #006d77; flex-shrink: 0;
}
.upload-history-turtle-name { font-weight: 700; color: #006d77; font-size: 0.95rem; }
.upload-history-turtle-meta { font-size: 0.8rem; color: var(--color-text-dim, #757575); margin-left: auto; }
.upload-history-chevron {
  font-size: 1rem; color: #006d77; transition: transform 0.2s;
  margin-left: 0.5rem;
}
.upload-history-chevron.open { transform: rotate(90deg); }
.upload-history-turtle-entries { border-top: 1px solid rgba(131,197,190,0.3); }
.upload-history-entry {
  display: flex; align-items: center; justify-content: space-between;
  padding: 0.65rem 1.25rem; gap: 1rem;
  border-bottom: 1px solid rgba(131,197,190,0.15);
}
.upload-history-entry:last-child { border-bottom: none; }
.upload-history-entry-info { display: flex; align-items: center; gap: 0.75rem; font-size: 0.85rem; flex-wrap: wrap; }
.upload-history-entry-id { font-weight: 700; color: #006d77; }
.upload-history-entry-dupes { color: #f39c12; font-weight: 600; font-size: 0.8rem; }
.upload-history-entry-date { color: var(--color-text-dim, #757575); }

/* individual ping rows inside expanded upload entry */
.upload-history-pings {
  background: rgba(0,109,119,0.02); border-top: 1px dashed rgba(131,197,190,0.3);
  padding: 0.25rem 0;
}
.upload-history-ping-row {
  display: flex; align-items: center; gap: 0.75rem;
  padding: 0.35rem 1.25rem 0.35rem 2.5rem; font-size: 0.8rem;
  border-bottom: 1px solid rgba(131,197,190,0.1);
}
.upload-history-ping-row:last-child { border-bottom: none; }
.upload-history-ping-num { font-weight: 700; color: #006d77; min-width: 28px; }
.upload-history-entry-chevron {
  font-size: 0.85rem; color: #006d77; transition: transform 0.2s;
  display: inline-block;
}
.upload-history-entry-chevron.open { transform: rotate(90deg); }
.upload-btn-delete-sm {
  width: 22px; height: 22px; border-radius: 50%;
  border: 1.5px solid #e74c3c; background: white; color: #e74c3c;
  font-size: 0.7rem; font-weight: 700; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.15s; margin-left: auto; flex-shrink: 0;
}
.upload-btn-delete-sm:hover:not(:disabled) { background: #e74c3c; color: white; }
.upload-btn-delete-sm:disabled { opacity: 0.4; cursor: not-allowed; }

/* ===== responsive ===== */
@media (max-width: 768px) {
  .upload-map-wrap { height: 320px; }
  .upload-date-range { flex-direction: column; align-items: flex-start; }
  .upload-date-hint { margin-left: 0; }
  .upload-table-controls { flex-direction: column; align-items: flex-start; }
  .upload-detail-grid { gap: 1rem; }
  .upload-turtle-selector { flex-direction: column; align-items: flex-start; }
  .upload-history-entry { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
}